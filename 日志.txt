2016年11月24日
开始记录

2016.11.24
1):摄像头变更至C8-C15

2016.11.25
1：摄像头移植到C口

2016.11.26
1：oled修改IO完成
2：按键增加完成
3：LED增加完成
4：陀螺仪加速度计完成
5：Pwm完成
6：112帧稳定

2016.11.27
1：修改oled驱动为原子方案
2：底层驱动大部分完成
2：增加ZLG_Gui完成
3: 透视变换完成
4：UI逻辑完成
5：控制逻辑初步完成

2016.11.28
(
代码设想：
1：实现4点画线:底部中点-》竖向中点的横向中点-》竖向中点的横向中点―》竖向重点的横向中点
2：路径收敛优化
3：控制算法
）

2016.12.14
Pcb焊接完成
匹配相应代码
1:按键匹配         -》



12.15-1.10之间
1:控制结构完成
2:车速1.7可跑
3:更改至速度控制为串级PID

2017.1.10
寒假开始

2017.1.12

寒假开始2天了
很愉快，比在学校的时候，效率还要高一些

最近两天完成情况如下：
1：完成ADC采集单片机温度
2：完成电池电压显示
3：优化UI逻辑结构
4：改善部分界面美观程度
5：加入Flash 1个公共部分，6个独立部分，每个部分可以保存30个变量
6：每个部分之间可以相互复制
7：每个变量可以单独复制


2017.1.15
截至今天完成情r如下
1:添加Debug菜单
2:全部关联到flash上面
3:上位机通信完成
4:定时器中断1ms的那个，时间未超标
5:陀螺仪加速度计拟合的值趋近文完善


2017.1.23
最近很开心哈哈。

0:去除透视变换，直立车上不适用
1:把速度PID定量的带入公式计算，完善各个PID环节
2:转弯微分项使用陀螺仪
3:中线处理完成
4:十字弯识别并补线完成
5:环路识别完成
6:障碍不用处理就能识别
7:UI UI更新了非常实用的功能，游标，相当赞的功能
8:暂时没了233333
9:晚上新增加的功能如下

①:按键加了按键音，可以在开关里面关掉
②:发车倒计时完成，停车距离显示完成


2017.1.24
1:优化了一些小细节
2:按键音时间缩短
3:加入双层长按机制，使调整参数更加方便
4:在得到稳定中心线的基础上，增加了斜率补偿算法，现在的障碍过的相当流弊，路径也不错


2017.1.25
1:转弯加模糊PD，系数可调
2:(上面的只是把文件加进来了，但是没机会现场调试，就没弄(前面这句话是找借口的))
3:把代码运行时间弄得比较美观易用了，加入右键固定屏幕的功能
4:把观察界面也加入了静止屏幕的功能，方便分析
5:另外，今天闲的无聊，把Main函数给干掉了
6:临半夜，把上位机调好了

腊月28，该过年了。

2017.1.31
年过完了，今天大年初四，过年真快，时间不等人，该抓紧了
今天更新的内容如下
1:状态预览窗口改成记住上一次状态的了，从哪个状态退出的话，下次进去，会进入到上次的状态
2:在SET选项卡，向左向右可以分别看到所有参数的预览 

>>突然想加一个Lock界面，但是感觉没啥卵用


2017.2.1
1:完成昨晚构思的Lock界面
2:系统频率降低至170MHZ，但是运行速度更快了这我就不知道为啥了
粗略看了一下，现在UI已经写了2300多行了哈哈哈开心


2017.2.2
1:由于蓝牙坏了，用不了上位机，所以干脆就写一个车载示波器好了2333333333

2017.2.4
1:UI已经写了2600多行了，感觉自己膨胀的不行，仿佛充了氢气，就要飞了，不过这个时候。来一把火，也就炸了。
得保持好心态。今天14:46，完成车载示波器的大部分功能。
2:还需要再增加一个示波器，不是实时显示波形的，车在行进的时候，把数据存起来可以在那个示波器里进行回看

3:上一个想法不错，花了1个小时也写完了哈哈哈

4:改变上一版本BUG


2017.2.7
1:增加Bootloder文件

2017.2.15
昨天情人节，哈哈哈，和小车度过了一个美好而充实的一天

在大大前天，应该是2月11号左右，开始闲的蛋疼，于是就开始画了一些PCB，原理图库弄好了，PCb库也弄好了
在大前天，原理图画好了，然后PCB划了一些，就厌烦了
前天我也不知道为啥，闲的蛋疼，突然注意力就转移到想写一个Bootloder了
然后，妈的我就刹不住车了。

接下来开始本次记录:
2月12日开始基于2月7日的工程进行修改，本来想做使用SD卡进行下载，但是由于手头没有SD卡以及单片机并没引出接口
所以只能先弄懂Bootloder的原理再说了，原理如下:在Bootloder里，需要实现两个功能，第一个功能，下载代码，第二个
功能，引导单片机进入代码，第二个功能在2月7日已经实现。本次实现的是下载代码，也就是把二进制执行文件，
通过蓝牙接收，然后放到单片机的指定位置就可以，说起来简单，但是做起来比较难，至少对我来说。
2月13日的时候，写了好多代码，但是始终也没完成，真是快要到了放弃的那一步，最后我都不知道自己是如何坚持下来的
应该是信念了，因为已经能感觉到自己当时已经麻木了。一遍不好就两遍 - -。
多亏了IAR的在线调试，能够看到单片机内部各个资源的情况，然后可能就靠自己的运气和觉悟了23333
然后2月13日晚上，一直弄到了12点办，还是没弄完- -。因为这个没接触过，算是初来乍到的感觉，完全不知道自己是哪里出了问题
但是事情的转机，出现在2月13日夜间即将入睡的时候。当时联想到一系列的现象，后来发现可能是扇区位弄错了，于是记下来
第二天早上，也就是情人节，终于搞定了。这天早上也出了不少的插曲，因为我把摄像头拔下去了，导致代码卡死，所以就在我
Bootloder已经写好了的情况下，我也不知道写好了- -。后来恍然大悟。把本来已经被我删掉的东西，恢复了一下，又写了一遍。

至少，最后的结果是好的，达到了无线下载的目的；原理是这样的，在Ram里预先申请50*2048大小的char型数组，然后接受到的数据
都存在这个数组里，最后传完之后，再进行写入Flash的操作。
2月14日，也就是昨天下午17点左右，完成了一系列的优化，说到这里又有故事了。
因为再下载这个Bootloder的时候，下载器的线基本坏了，然后下载完之后，直接被我扔掉了。
所以就算我想更新Bootloder也没有工具了，后来急中生智，想到了一个绝招，我又写了一个Bootloder,不过这个Bootloder是
运行在程序位的，也就是把这个Bootloder当做一个普通的程序代码，烧到单片机内，然后当旧的Bootloder把我引导到这个位于程序的
Bootloder后，在程序里，反向的烧写Bootloder，也就是万一这个Bootloder有一点问题，那就全废了，这个假期不用玩了
但是结果和想象的一样，大获成功。哈哈哈，这个时候就Get一个新方法。于是我发出了第二版Bootloder供大家玩
2月15日也就是今天，今天没有什么惊悚的事情，我把UI内的变量名字又重新关联了一下，然后把摄像头搞到了150帧
仅此而已。





